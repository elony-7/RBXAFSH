local AutoFishing = {}
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

AutoFishing.Enabled = false

local function log(msg)
	print(msg)
end

--=============================
--     MAIN AUTO LOOP
--=============================
function AutoFishing.Start()
	AutoFishing.Enabled = true

	task.spawn(function()

		local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()

		while AutoFishing.Enabled do

			task.wait(0.004)

			local packages = ReplicatedStorage:FindFirstChild("Packages")
			if not packages then continue end

			local index = packages:FindFirstChild("_Index")
			if not index then continue end

			local sleitnick = index:FindFirstChild("sleitnick_net@0.2.0")
			if not sleitnick then continue end

			local netFolder = sleitnick:FindFirstChild("net")
			if not netFolder then continue end

			-- Removed equip remote!

			local chargeRF = netFolder:FindFirstChild("RF/ChargeFishingRod")
			if chargeRF then
				task.defer(chargeRF.InvokeServer, chargeRF, workspace:GetServerTimeNow())
			end

			local startRF = netFolder:FindFirstChild("RF/RequestFishingMinigameStarted")
			if startRF then
				task.defer(startRF.InvokeServer, startRF, 1, 1)
			end

			local finishedRE = netFolder:FindFirstChild("RE/FishingCompleted")
			if finishedRE then
				task.defer(finishedRE.FireServer, finishedRE)
			end

		end

	end)
end

function AutoFishing.Stop()
	AutoFishing.Enabled = false
end

return AutoFishing
